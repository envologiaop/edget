import { prisma } from '@/lib/prisma'\n\nexport default async function AdminTeachersPage() {\n  const pending = await prisma.teacherProfile.findMany({ where: { status: 'PENDING' }, include: { user: true, feePayments: true } })\n  const fees = await prisma.teacherFeePayment.findMany({ where: { status: 'PENDING' }, include: { teacher: { include: { user: true } } } })\n  async function approveTeacher(formData: FormData) {\n    'use server'\n    const teacherId = String(formData.get('teacherId'))\n    await fetch('/api/admin/teacher/approve', { method: 'POST', body: JSON.stringify({ teacherId, approve: true }) })\n  }\n  async function rejectTeacher(formData: FormData) {\n    'use server'\n    const teacherId = String(formData.get('teacherId'))\n    await fetch('/api/admin/teacher/approve', { method: 'POST', body: JSON.stringify({ teacherId, approve: false }) })\n  }\n  return (\n    <div className=\"space-y-6\">\n      <section>\n        <h2 className=\"text-xl font-semibold\">Pending Teachers</h2>\n        <ul className=\"divide-y\">\n          {pending.map(t => (\n            <li key={t.id} className=\"py-3\">\n              <div className=\"font-medium\">{t.user.name} – {t.university} ({t.department})</div>\n              <div className=\"text-sm text-gray-600\">Subjects: {t.subjects.join(', ')} | Grades: {t.preferredGrades.join(', ')}</div>\n              <form action={approveTeacher} className=\"inline\"><input type=\"hidden\" name=\"teacherId\" value={t.id} /><button className=\"px-3 py-1 border rounded mr-2\">Approve</button></form>\n              <form action={rejectTeacher} className=\"inline\"><input type=\"hidden\" name=\"teacherId\" value={t.id} /><button className=\"px-3 py-1 border rounded\">Reject</button></form>\n            </li>\n          ))}\n        </ul>\n      </section>\n      <section>\n        <h2 className=\"text-xl font-semibold\">Pending Fee Payments</h2>\n        <ul className=\"divide-y\">\n          {fees.map(f => (\n            <li key={f.id} className=\"py-3\">\n              <div className=\"font-medium\">{f.teacher.user.name} – {f.method} – 100 ETB</div>\n              <div className=\"text-sm text-gray-600\">Receipt: {f.receiptUrl}</div>\n              <form action={async () => { 'use server'; await fetch('/api/admin/teacher/fee', { method: 'POST', body: JSON.stringify({ feeId: f.id, confirm: true }) }) }} className=\"inline\"><button className=\"px-3 py-1 border rounded mr-2\">Confirm</button></form>\n              <form action={async () => { 'use server'; await fetch('/api/admin/teacher/fee', { method: 'POST', body: JSON.stringify({ feeId: f.id, confirm: false }) }) }} className=\"inline\"><button className=\"px-3 py-1 border rounded\">Reject</button></form>\n            </li>\n          ))}\n        </ul>\n      </section>\n    </div>\n  )\n}\n