import { NextRequest, NextResponse } from 'next/server'\nimport { auth } from '@/auth'\nimport { prisma } from '@/lib/prisma'\n\nexport async function POST(req: NextRequest) {\n  const session = await auth()\n  if (!session || (session as any).role !== 'STUDENT') return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n  const form = await req.formData()\n  const teacherId = String(form.get('teacherId')||'')\n  const packageId = String(form.get('packageId')||'')\n  const daysStr = String(form.get('days')||'')\n  const timeSlot = String(form.get('timeSlot')||'')\n  if (!teacherId || !packageId || !timeSlot) return NextResponse.json({ error: 'Missing fields' }, { status: 400 })\n  const days = daysStr.split(',').map(s=>parseInt(s.trim(),10)).filter(n=>!isNaN(n) && n>=0 && n<=6)\n  const reqRec = await prisma.tutorRequest.create({ data: {\n    studentId: (session.user as any).id!,\n    teacherId,\n    packageId,\n    days,\n    timeSlot,\n    status: 'PENDING_TEACHER'\n  }})\n  return NextResponse.json({ ok: true, id: reqRec.id })\n}\n