import { NextRequest, NextResponse } from 'next/server'\nimport { auth } from '@/auth'\nimport { prisma } from '@/lib/prisma'\n\nexport async function GET() {\n  const session = await auth()\n  if (!session || (session as any).role !== 'TEACHER') return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n  const teacher = await prisma.teacherProfile.findUnique({ where: { userId: (session.user as any).id } })\n  if (!teacher) return NextResponse.json({ items: [] })\n  const items = await prisma.tutorRequest.findMany({ where: { teacherId: teacher.id, status: { in: ['PENDING_TEACHER','ACCEPTED_BY_TEACHER','DENIED_BY_TEACHER'] } }, include: { package: true, student: true } })\n  return NextResponse.json({ items })\n}\n\nexport async function PATCH(req: NextRequest) {\n  const session = await auth()\n  if (!session || (session as any).role !== 'TEACHER') return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n  const { requestId, accept } = await req.json()\n  if (!requestId) return NextResponse.json({ error: 'Missing requestId' }, { status: 400 })\n  const status = accept ? 'ACCEPTED_BY_TEACHER' : 'DENIED_BY_TEACHER'\n  await prisma.tutorRequest.update({ where: { id: requestId }, data: { status: accept ? 'PENDING_ADMIN' : status } })\n  return NextResponse.json({ ok: true })\n}\n