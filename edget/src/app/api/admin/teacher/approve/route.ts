import { NextRequest, NextResponse } from 'next/server'\nimport { auth } from '@/auth'\nimport { prisma } from '@/lib/prisma'\n\nexport async function POST(req: NextRequest) {\n  const session = await auth()\n  if (!session || (session as any).role !== 'ADMIN') return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n  const { teacherId, approve } = await req.json()\n  if (!teacherId) return NextResponse.json({ error: 'Missing teacherId' }, { status: 400 })\n  const status = approve ? 'APPROVED' : 'REJECTED'\n  const teacher = await prisma.teacherProfile.update({ where: { id: teacherId }, data: { status } })\n  if (approve) {\n    await prisma.tutorListing.upsert({ where: { teacherId: teacherId }, update: { visible: true, approvedAt: new Date() }, create: { teacherId: teacherId, visible: true, approvedAt: new Date() } })\n  }\n  return NextResponse.json({ ok: true, teacherId: teacher.id, status })\n}\n